---
import InputField from "@/components/InputField.astro";
import Layout from "@/layout/Layout.astro";
import { wordlib } from "@/lib/word-service";

let isWord = undefined;

if (Astro.request.method === "POST") {
  try {
    const data = await Astro.request.formData();
    const payload = data.get("letters") as string;
    isWord = wordlib.isWord(payload);
  } catch (error) {
    if (error instanceof Error) {
      console.error(error.message);
    }
  }
}
---

<Layout>
  <p class="text-xs font-semibold opacity-75 py-3">
    The <span class="text-app-light-blue">isWord</span>
     feature checks if a word exists in the dictionary.
  </p>

  <InputField service="Look up word:" mainInputFieldPlaceholder="your word" />
  {
    isWord === true && isWord !== undefined && (
      <div class="flex items-center justify-center py-8 bg-green-800 my-2 rounded-md">
        <p class="font-black text-xl">Yup!</p>
      </div>
    )
  }
  {
    isWord === false && isWord !== undefined && (
      <div class="flex items-center justify-center py-8 bg-red-800 my-2 rounded-md">
        <p class="font-black text-xl">Nope!</p>
      </div>
    )
  }
</Layout>
