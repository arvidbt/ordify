---
import InputField from "@/components/InputField.astro";
import WordContainer from "@/components/WordContainer.astro";

import Layout from "@/layout/Layout.astro";

import { wordlib } from "@/lib/word-service";

const words: string[] = [];

if (Astro.request.method === "POST") {
  try {
    const data = await Astro.request.formData();
    const payload = data.get("letters") as string;
    words.push(...wordlib.startsWith(payload));
  } catch (error) {
    if (error instanceof Error) {
      console.error(error.message);
    }
  }
}
---

<Layout>
  <p class="text-xs font-semibold opacity-75 py-3">
    The <span class="text-app-light-blue">endsWith</span>
     feature checks for all known words that starts with another string (word).
  </p>

  <InputField service="Words starting with:" />

  <WordContainer result={words} />
</Layout>
